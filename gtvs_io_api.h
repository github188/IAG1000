#ifndef GTVS_IO_API_H
#define GTVS_IO_API_H
#define BYTE unsigned char
#define WORD unsigned short
#define DWORD unsigned long


#include "mod_socket.h"
//#include "/home/zw/zhangwei/vserver/vs3_drivers/vs3_iodrv/driver/vs3io.h"




#ifndef OUT
#define OUT
#define INOUT
#define IN
#endif

#define GPIO_SET_INPUT 0x5 //è®¾ç½®æŠ¥è­¦è¾“å…¥å¸¸å¼€å¸¸é—­å±æ€§
#define GPIO_GET_INPUT 0X6 //è¯»å–æŠ¥è­¦è¾“å…¥å¸¸å¼€å¸¸é—­å±æ€§
#define GPIO_GET_DWORD 0X7 //è¯»å–æŠ¥è­¦è¾“å…¥çŠ¶æ€
#define GPIO_SET_DELAY 0X8 //è®¾ç½®æŠ¥è­¦è¾“å…¥å»¶æ—¶
#define GPIO_GET_DELAY 0X9 //è¯»å–æŠ¥è­¦è¾“å…¥å»¶æ—¶
#define GPIO_SET_OUTPUT_VALUE 0x10 //è®¾ç½®æŠ¥è­¦è¾“å‡ºioçš„å€¼
#define GPIO_SET_HEARTBEAT    0x11
#define GPIO_GET_POWER        0x12

typedef struct{
	unsigned int on_delay;//ioå˜ä¸ºé«˜åçš„å»¶æ—¶
	unsigned int off_delay;//ioå˜ä¸ºä½åçš„å»¶æ—¶
}TimeDelay;

struct relay_struct{
	int  ch;			//?Ìµ?????Í¨?Àº?0??1??
	int  result;		//?Ìµ????Ç·????? ( 1???? ?Íµ?Æ½??0?Ö¸? ?ßµ?Æ½)
	};

//È±Ê¡????Ê±????Ê±??,??Î»????
#define DEF_VALID_DELAY		0
#define DEF_INVALID_DELAY	10

//int beep(void);

/**********************************************************************************************
 * ??????	:init_vsiodrv()
 * ????	:	?ò¿ª²???Ê¼????io?Ü½Å¿??ÆµÄ¿??Å¹?,?Ìµ???,???????è±¸
 * ????	:	
 * ????Öµ	:0??Ê¾?É¹???Öµ??Ê¾Ê§??
 **********************************************************************************************/
int	init_gpiodrv(void);

/**********************************************************************************************
 * ??????	:set_heart_beat(int)
 * ????	:	????????
 * ????	:	??Ê¾?ßµÍµ?Æ½
 * ????Öµ	:0??Ê¾?É¹???Öµ??Ê¾Ê§??
 **********************************************************************************************/
int set_heart_beat(int level);


/**********************************************************************************************
 * ??????	:set_trigin_delay()
 * ????	:	?è¶¨???????Óµ???Ê±????Ê±??
 		(Ã»???è¶¨?Ä»????????Ğ¶?????È±Ê¡ÖµDEF_VALID_DELAY, DEF_INVALID_DELAY)
 * ????	:	valid_delay: ?Ã¶??Ó´Ó»Ö¸???????????Ê±????
 			invalid_delay:?Ã¶??Ó´Ó´??????Ö¸?????Ê±????	
 * ????Öµ	:0??Ê¾?É¹???Öµ??Ê¾Ê§??
 **********************************************************************************************/
 int set_trigin_delay(int valid_delay, int invalid_delay);
 
/**************************************************************************
 * ??????	:set_trigin_attrib_perbit()
 * ????	:???????Ã¶???????????
 * ????	:attrib:??Î»??Ê¾?Ä¶???????????Öµ 1??Ê¾???? 0??Ê¾????,È±Ê¡ÎªÈ«0
 * ????Öµ	:0??Ê¾?É¹?????Öµ??Ê¾Ê§??
*************************************************************************/
int set_trigin_attrib_perbit(DWORD attrib);


/**************************************************************************
 * ??????	:set_trigout_attrib_perbit()
 * ????	:???Ã¶???????????
 * ????	:attrib:??Î»??Ê¾?Ä¶???????????Öµ 1??Ê¾???? 0??Ê¾????,È±Ê¡ÎªÈ«0
 * ????Öµ	:0??Ê¾?É¹?????Öµ??Ê¾Ê§??
*************************************************************************/
int set_trigout_attrib_perbit(DWORD attrib);


/**********************************************************************************************
 * ??????	:read_trigin_status()
 * ????	:	??È¡???????????ÓµÄµ?Ç°????×´Ì¬,
 *			??×¼read?Ó¿Ú£??????İ²Å·??Ø£?
 *			(???Ë´????è±¸???Äµ?Ò»???â£¬Ã¿???????Ğ±ä»¯?Å´Ó´Ë½Ó¿Ú·???)
 * ????	:	status,DWORD????Ö¸??,??Ö¸????DWORD??Öµ?ÓµÍµ???Î»??Ê¾???Ó´?0??32Î»??×´Ì¬??????????Ê±????
 *			1??Ê¾??Î»?Ğ´?????0??Ê¾Ã»??
 * ????Öµ:  ?Ç¸?Öµ??Ê¾?Áµ????Ö½???????Öµ??Ê¾Ê§??			
 * **********************************************************************************************/
 int  read_trigin_status(OUT DWORD *status);


/**********************************************************************************************
 * ??????	:set_relay_output()
 * ????	:	???Ìµ????????Åº?
 * ????	:	ch:?Ìµ?????Í¨?Àº?,??0??Ê¼
 *		result:1??Ê¾?Ìµ?????????0??Ê¾?Ìµ????Ö¸?
 
 * ????Öµ	:0??Ê¾?É¹???Öµ??Ê¾Ê§??
 **********************************************************************************************/
int set_relay_output(int ch, int result);

int	exit_gpiodrv(void);

#endif

