#ifndef GTVS_IO_API_H
#define GTVS_IO_API_H
#define BYTE unsigned char
#define WORD unsigned short
#define DWORD unsigned long


#include "mod_socket.h"
//#include "/home/zw/zhangwei/vserver/vs3_drivers/vs3_iodrv/driver/vs3io.h"




#ifndef OUT
#define OUT
#define INOUT
#define IN
#endif

#define GPIO_SET_INPUT 0x5 //ËÆæÁΩÆÊä•Ë≠¶ËæìÂÖ•Â∏∏ÂºÄÂ∏∏Èó≠Â±ûÊÄß
#define GPIO_GET_INPUT 0X6 //ËØªÂèñÊä•Ë≠¶ËæìÂÖ•Â∏∏ÂºÄÂ∏∏Èó≠Â±ûÊÄß
#define GPIO_GET_DWORD 0X7 //ËØªÂèñÊä•Ë≠¶ËæìÂÖ•Áä∂ÊÄÅ
#define GPIO_SET_DELAY 0X8 //ËÆæÁΩÆÊä•Ë≠¶ËæìÂÖ•Âª∂Êó∂
#define GPIO_GET_DELAY 0X9 //ËØªÂèñÊä•Ë≠¶ËæìÂÖ•Âª∂Êó∂
#define GPIO_SET_OUTPUT_VALUE 0x10 //ËÆæÁΩÆÊä•Ë≠¶ËæìÂá∫ioÁöÑÂÄº
#define GPIO_SET_HEARTBEAT    0x11
#define GPIO_GET_POWER        0x12

#define MMAP_PATH    "/dev/mem"

#define I2C_ADDR  0x20


#define RALINK_GPIO_DIR_IN        0
#define RALINK_GPIO_DIR_OUT        1

#define I2S_MUX_REG             0x60
#define AGPIO_CFG               0x3C

#define RALINK_REG_PIOINT        0x690
#define RALINK_REG_PIOEDGE        0x6A0
#define RALINK_REG_PIORENA        0x650
#define RALINK_REG_PIOFENA        0x660
#define RALINK_REG_PIODATA        0x620
#define RALINK_REG_PIODIR        0x600
#define RALINK_REG_PIOSET        0x630
#define RALINK_REG_PIORESET        0x640

#define RALINK_REG_PIO6332INT        0x694
#define RALINK_REG_PIO6332EDGE        0x6A4
#define RALINK_REG_PIO6332RENA        0x654
#define RALINK_REG_PIO6332FENA        0x664
#define RALINK_REG_PIO6332DATA        0x624
#define RALINK_REG_PIO6332DIR        0x604
#define RALINK_REG_PIO6332SET        0x634
#define RALINK_REG_PIO6332RESET        0x644

#define RALINK_REG_PIO9564INT        0x698
#define RALINK_REG_PIO9564EDGE        0x6A8
#define RALINK_REG_PIO9564RENA        0x658
#define RALINK_REG_PIO9564FENA        0x668
#define RALINK_REG_PIO9564DATA        0x628
#define RALINK_REG_PIO9564DIR        0x608
#define RALINK_REG_PIO9564SET        0x638
#define RALINK_REG_PIO9564RESET        0x648

typedef struct{
	unsigned int on_delay;//ioÂèò‰∏∫È´òÂêéÁöÑÂª∂Êó∂
	unsigned int off_delay;//ioÂèò‰∏∫‰ΩéÂêéÁöÑÂª∂Êó∂
}TimeDelay;

struct relay_struct{
	int  ch;			//?Ãµ?????Õ®?¿∫?0??1??
	int  result;		//?Ãµ????«∑????? ( 1???? ?Õµ?∆Ω??0?÷∏? ?ﬂµ?∆Ω)
	};

//»± °???? ±???? ±??,??Œª????
#define DEF_VALID_DELAY		0
#define DEF_INVALID_DELAY	10

//int beep(void);

/**********************************************************************************************
 * ??????	:init_vsiodrv()
 * ????	:	?Úø™≤??? º????io?‹Ω≈ø??∆µƒø??≈π?,?Ãµ???,???????Ë±∏
 * ????	:	
 * ????÷µ	:0?? æ?…π???÷µ?? æ ß??
 **********************************************************************************************/
int	init_gpiodrv(void);

/**********************************************************************************************
 * ??????	:set_heart_beat(int)
 * ????	:	????????
 * ????	:	?? æ?ﬂµÕµ?∆Ω
 * ????÷µ	:0?? æ?…π???÷µ?? æ ß??
 **********************************************************************************************/
int set_heart_beat(int level);


/**********************************************************************************************
 * ??????	:set_trigin_delay()
 * ????	:	?Ë∂®???????”µ??? ±???? ±??
 		(√ª???Ë∂®?ƒª????????–∂?????»± °÷µDEF_VALID_DELAY, DEF_INVALID_DELAY)
 * ????	:	valid_delay: ?√∂??”¥”ª÷∏??????????? ±????
 			invalid_delay:?√∂??”¥”¥??????÷∏????? ±????	
 * ????÷µ	:0?? æ?…π???÷µ?? æ ß??
 **********************************************************************************************/
 int set_trigin_delay(int valid_delay, int invalid_delay);
 
/**************************************************************************
 * ??????	:set_trigin_attrib_perbit()
 * ????	:???????√∂???????????
 * ????	:attrib:??Œª?? æ?ƒ∂???????????÷µ 1?? æ???? 0?? æ????,»± °Œ™»´0
 * ????÷µ	:0?? æ?…π?????÷µ?? æ ß??
*************************************************************************/
int set_trigin_attrib_perbit(DWORD attrib);


/**************************************************************************
 * ??????	:set_trigout_attrib_perbit()
 * ????	:???√∂???????????
 * ????	:attrib:??Œª?? æ?ƒ∂???????????÷µ 1?? æ???? 0?? æ????,»± °Œ™»´0
 * ????÷µ	:0?? æ?…π?????÷µ?? æ ß??
*************************************************************************/
int set_trigout_attrib_perbit(DWORD attrib);


/**********************************************************************************************
 * ??????	:read_trigin_status()
 * ????	:	??»°???????????”µƒµ?«∞????◊¥Ã¨,
 *			??◊ºread?”ø⁄£??????›≤≈∑??ÿ£?
 *			(???À¥????Ë±∏???ƒµ?“ª???‚£¨√ø???????–±‰ªØ?≈¥”¥ÀΩ”ø⁄∑???)
 * ????	:	status,DWORD????÷∏??,??÷∏????DWORD??÷µ?”µÕµ???Œª?? æ???”¥?0??32Œª??◊¥Ã¨?????????? ±????
 *			1?? æ??Œª?–¥?????0?? æ√ª??
 * ????÷µ:  ?«∏?÷µ?? æ?¡µ????÷Ω???????÷µ?? æ ß??			
 * **********************************************************************************************/
 int  read_trigin_status(OUT DWORD *status);


/**********************************************************************************************
 * ??????	:set_relay_output()
 * ????	:	???Ãµ????????≈∫?
 * ????	:	ch:?Ãµ?????Õ®?¿∫?,??0?? º
 *		result:1?? æ?Ãµ?????????0?? æ?Ãµ????÷∏?
 
 * ????÷µ	:0?? æ?…π???÷µ?? æ ß??
 **********************************************************************************************/
int set_relay_output(int ch, int result);

int	exit_gpiodrv(void);

#endif

